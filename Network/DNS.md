### 1. DNS의 개념
+ 전화를 걸 때 상대방의 핸드폰 번호를 알아야 하듯 컴퓨터 역시 상대방의 주소(IP)를 알아야 접속할 수 있다.
+ DNS가 없을 당시 Stanford Research Institute라는 단체가 전 세계에 있는 호스츠 파일을 관리했는데 어떤 웹 서버를 운영하는 사람이 이 기관에 자신의 IP 주소를 특정 도메인으로 등록해달라고 요청하고 다른 사람 역시 이 기관에 있는 호스츠 파일을 다운로드 받아야 그 도메인으로 해당 IP 주소에 해당하는 웹 사이트에 접속할 수 있었다.
+ 아울러 사용자가 **모든 IP 주소를 기억하기 어렵고 또 이는 변경될 수도 있어** IP 주소만을 통해서 수많은 컴퓨터들과 통신하기에는 무리가 있다. 이러한 문제를 개선하고자 나온 것이 DNS(Domain Name System)이다.
+ DNS는 인터넷의 도메인 체계로서 상대방의 이름과 핸드폰 번호를 연결하여 저장하는 주소록이 있듯이 사람들이 알아보기 쉬운 텍스트와 IP 주소를 연결하여 저장한다.
  + 메타포: IP(전화번호) vs DNS(전화번호부)
+ IP 주소가 아닌 도메인(Domain)을 통해서 사용자가 서버에 접속하게 한다면 **도메인은 고정하고 IP 주소를 변경함으로써 더욱 유연하게 서버를 운영**할 수 있다.
  + DDNS(Dynamic DNS) : 실시간으로 DNS(IP와 도메인 관계)를 갱신하는 방식
+ 도메인은 연간 1만원 ~ 10만원 정도를 국제기구에 납부하거나 freenon.com 등 웹 사이트의 서비스를 이용하면 1년간 무료로 이용할 수 있다.

<br/>

### 2. Public DNS
+ 사용자 컴퓨터가 인터넷에 연결되는 순간 통신사(ISP)로부터 자동으로 DNS 서버 IP 주소를 할당받는다.
+ 따라서 통신사는 사용자가 어느 웹 사이트에 접속하려고 하는지 파악할 수 있으며 이 정보를 통해 마케팅, 판매 등에 활용할 수 있다. 
+ 이때 사용자는 자동으로 할당받는 것 외의 DNS 서버를 이용할 수 있는데 이를 **Public DNS 서버**라고 한다. 대표적인 예로 Cisco OpenDNS, Google Public DNS 등이 있다.

<br/>

### 3. 도메인(Domain)
> 
> 도메인(또는 도메인 네임)은 **URL(URL, Uniform Resource Locator)의 일종**으로 우리가 접속하고자 하는 사이트의 IP 주소(예: 240.10.20.1)를 쉽게 찾아갈 수 있도록 만든 주소(예: `www.naver.com`)이다.
> 
> #### 도메인 이름의 계층적 구조
> 도메인 이름(Domain Name)은 **최상위 도메인(국가 or 미국의 기관)과 서브 도메인, 호스트 이름 등**으로 계층적으로 구성된다.
> > + 예시 : `www.naver.com`, `blog.naver.com`, etc...
> > + www, blog : 서브(Sub) 도메인
> >   + section.blog와 같이 2개 이상의 서브 도메인도 사용 가능하다.
> >   + 보통 서브 도메인에 www를 사용하는 것은 해당 서버가 웹 서버임을 의미한다. 이를 생략해도 웹 서버 기능을 하는데는 아무런 지장이 없다.
> > ```
> > ※ 참고 : www
> > www 역시 서브 도메인으로서 www라는 이름만 달리하여 만들어진 도메인을 멀티 도메인이라고 한다.
> > www는 전 세계를 하나의 네트워크 망(World Wide Web)으로 묶기 위한(freenet, ftp, pop, pmtpa 등의 프로토콜과 구분하기 위한) '도메인 표기'에 대한 일종의 약속이었으나 반드시 www를 사용해야 하는 것은 아니다.
> > 사용자들이 www을 습관적으로 사용하기 때문에 이를 서브 도메인에 포함하는 때가 있지만 http(s)이라는 프로토콜을 이용해 통신한다면 www를 사용하나 안 하나 기능적으로는 동일하다.
> > 요즘 추세는 도메인의 간결함을 추구하여 www를 사용하지 않는 편이다.
> > ```
> > + naver : 세컨드-레벨(Second-level) 도메인
> > + com : 탑-레벨(Top-level) 도메인
> > + com 뒤에는 .이 생략되어 있는데 이를 루트(Root) 도메인이라고 한다.(`www.naver.com.`이라고 입력해도 해당 웹 사이트에 접속할 수 있다.)
> 
> #### 도메인 계층별 DNS 서버
> 도메인의 레벨별로 루트(Root) 도메인, 탑-레벨(Top-level) 도메인, 세컨드-레벨(Second-level) 도메인, 서브(sub) 도메인으로 나뉘는데 **각각의 도메인 계층별로 담당하는 DNS 서버가 다르다.**
> > + 특히, 루트 도메인을 담당하는 DNS 서버(루트 네임 서버)는 그 하위인 탑-레벨 도메인(탑-레벨 도메인 네임 서버)을 담당하는 DNS 서버들의 목록과 IP 주소를 알아야 한다.
> > + 마찬가지로 탑-레벨 도메인을 담당하는 DNS 서버(탑-레벨 도메인 네임 서버)는 세컨드-레벨 도메인을 담당하는 DNS 서버(세컨드-레벨 도메인 네임 서버)들의 목록과 IP 주소를 알아야 한다.
> > + 하지만 루트에서는 세컨드 레벨을 모르고 탑-레벨은 서브에 대해서 모른다. **즉 해당 도메인을 담당하는 DNS 서버는 그 직속 하위의 도메인을 담당하는 DNS 서버 목록과 IP 주소만 알고 있다.**
> 
> #### FQDN(Fully Qualified Domain Name, 전체 주소 도메인 네임 or 절대 도메인 네임) : 호스트 이름과 도메인 이름을 함께 표기한 것
> > + (URL 예시) `https://section.blog.naver.com`
> > + FQDN 표기 : section.blog.naver.com.
> > + section.blog. : 호스트 이름
> > + naver.com. :  도메인 이름
> 
> #### PQDN(Partially Qualified Domain Name, 부분적 주소 도메인 네임 or 상대 도메인 네임) : 호스트 이름만 표기한 것
> > + (URL 예시) `https://section.blog.naver.com`
> > + PQDN 표기 : section.blog.
```
※ 참고 : 가상도메인
가상 도메인이란 기본 도메인과는 전혀 다른 도메인이지만 같은 홈페이지에 연결되어있는 도메인을 말한다.
```

<br/>

### 4. 도메인 이름의 등록 과정과 원리
> 
> #### DNS 최상위 기관 ICANN(비영리 단체)
> > + ICANN가 하는 일은 루트 네임 서버(Root name server)를 관리한다. 이 루트 네임 서버의 주소는 a.root-servers.net ~ m.root-servers.net로 총 13대의 컴퓨터가 있다.
> > + 이 각각의 컴퓨터는 다시 여러 개로 나뉘어 총 수백대의 성능 좋은 컴퓨터가 전 세계에 흩어져 루트 네임 서버로서 동작하고 있다.
> > + 루트 네임 서버는 탑-레벨 도메인 네임 서버 주소를 저장하고 있다.
> 
> #### Registry(등록소, 기관 or 기업들)
> > + 이 기관들은 .com, .net, co.kr, .kr, .org 등과 같은 탑-레벨 도메인 네임 서버를 관리한다. 이 서버의 주소는 a.gtld-servers.net ~ m.root-servers.net이 있다.
> > + 탑-레벨 도메인 네임 서버는 Authoritative(등록대행자) name server 주소를 저장하고 있다.
> 
> #### Registrar(등록대행자, 기관 or 기업들)
> > + 이들은 도메인 등록자로부터 도메인 등록 작업을 의뢰받아 등록소에 도메인을 등록하는 대행 역할을 한다.
> > + 아울러 Authoritative name server를 관리하는데 이 서버의 주소는 a.iana-servers.net이 있다.
> > + Authoritative name server는 도메인 등록자가 요청한 도메인의 IP 주소를 저장하고 있다.

<br/>

### 5. 클라이언트의 도메인 계층별 DNS 서버 접속 순서(if, 웹 사이트)
+ 클라이언트가 웹 브라우저에 도메인 입력
+ 우선적으로 호스츠 파일을 찾고 해당하는 IP 주소가 없다면 웹 브라우저는 웹 서버와 바로 통신하는 것이 아니라 DNS 서버를 먼저 거친다.
  + **사용자의 컴퓨터가 인터넷에 연결될 때는 DHCP를 통해서 DNS 서버의 IP 주소가 자동으로 할당**되기 때문이다.
+ 클라이언트는 Public DNS 등 최초 DNS 서버에 해당 도메인에 대한 웹 서버의 IP 주소를 요청
+ 최초 DNS 서버가 Root name server에 도메인 IP 주소 요청
  + Public DNS 등 모든 도메인 서버는 반드시 루트 네임 서버의 주소를 기본적으로 알고 있다. 그게 안 되면 통신이 안 되기 때문이다.
+ Root name server가 Top-level domain server의 주소를 DNS 서버에 반환 
+ DNS 서버가 다시 Top-level domain server에 도메인 IP 주소 요청
+ Top-level domain server가 Authoritative name server의 주소를 DNS 서버에 반환
+ DNS 서버가 다시 Authoritative name server에 도메인 IP 주소 요청
+ Authoritative name server가 도메인 IP 주소 반환
+ DNS 서버가 도메인 IP 주소를 클라이언트에게 반환
+ 클라이언트가 반환받은 IP 주소를 통해 해당 웹 서버의 웹 사이트에 접속
+ `이처럼 많은 DNS 서버가 유기적으로 협력하여 클라이언트로부터 받은 도메인을 IP 주소로 알려주게 된다.`
```
※ 참고 : DNS 서버의 캐시(Cache)
DNS 서버는 도메인에 대한 IP 주소를 알기 위해 루트 네임 서버, 탑-레벨 도메인 서버 등 여러 서버에 신호를 보내게 되는데 같은 도메인에 대해 매번 이 작업을 반복한다면 매우 비효율적일 것이다.
따라서 도메인에 대한 서버로부터의 요청 결과를 캐시(cache)로 저장했다가 똑같은 요청이 들어오면 캐시에 저장된 결과를 클라이언트에게 반환한다.
⇒ 성능 개선 및 네트워크 부하 감소
```

<br/>

### 6. nslookup : 명령프롬프트창을 통해 특정 도메인에 해당하는 IP 주소 알아내는 방법
> 
> #### DNS 서버를 통해 IP 주소 얻어내기
> + 명령 프롬프트창에 `nslookup 도메인 이름` 입력(또는 `nslookup –type=a 도메인 이름`)
> 
> ![image](https://user-images.githubusercontent.com/82401504/146795524-42e51802-adbd-453f-9514-971551e69e0a.png)
> 
> + nslookup으로 도메인을 조회하는 것은 DNS 서버를 통해 조회하는 것이다.
> + 따라서 처음에 나오는 서버와 Address는 컴퓨터의 DNS 서버 및 그 서버의 주소이다. 
> + 이때 DNS 서버는 해당 도메인에 대한 권한이 있는 서버는 아니므로 `권한 없는 응답`이 출력되고 가장 하단의 Address는 DNS 서버로부터 응답받은 해당 도메인에 대한 IP 주소가 출력된다.
>   + 도메인에 대한 결정권 권한을 가지고 있는 서버는 Authoritative Name Server이다.
>
> #### DNS 서버를 통해 특정 도메인에 대한 IP 주소를 갖고있는 Authoritative Name Server의 주소 얻어내기
> + 명령 프롬프트창에 `nslookup –type=ns 도메인 이름` 입력
> 
> ![image](https://user-images.githubusercontent.com/82401504/146795471-ce213bde-5085-435c-a5d4-88bf72d7fd53.png)
> 
> + 이때 도메인에 해당하는 IP 주소를 저장하고 있는 Authoritative Name Server의 주소는 a. iana.servers.net 과 b.iana.servers.net로 하나가 죽더라도 나머지가 동작하도록 2개의 서버가 운영되고 있다.
>
> #### DNS 서버를 거치지 않고 Authoritative Name Server를 통해 도메인에 해당하는 IP 주소 얻어내기
> + 명령 프롬프트창에 `nslookup example.com a.iana-servers.net` 입력
> 
> ![image](https://user-images.githubusercontent.com/82401504/146795569-1a398428-04a7-409d-810a-0e4a97298ae0.png)
> 
> + 처음에 나오는 서버와 Address는 Authoritative Name Server에 대한 내용이며, 아래 이름과 Address는 Authoritative Name Server로부터 응답받은 해당 도메인에 대한 내용이다.
> + 이때 DNS 서버를 거치지 않고 해당 IP에 대한 권한이 있는 Authoritative name server로부터 응답을 받았기 때문에 '권한 없는 응답' 문구가 없어진 것을 볼 수 있다.

<br/>

### 7. DNS record
+ 도메인 네임 서버가 하는 역할 중 가장 중요한 것은 **특정 도메인 네임에 대한 정보를 저장**하는데 그 정보 한 건 한 건을 DNS 레코드라고 한다.
+ 예시 : 클라이언트가 입력한 도메인이 dns4u.ga이고, 원하는 IP 주소가 52.231.13.22라고 가정했을 때
> + ga NS a.ns.ga : Root Name Server가 ga.(Top-Level Domain)에 대해 **NS(Name Server) 형식의** DNS 레코드로 a.ns.ga를 저장함
>   + 여기서 a.ns.ga는 그 하위 Top-Level Domain Name Server의 주소일 것이다.
> + dns4u.ga NS ns01.freenom.com : Top-Level Domain Name Server는 dns4u.ga.에 대한 **NS(Name Server) 형식의** DNS 레코드로 ns01.freenom.com를 저장함
>   + 여기서 ns01.freenom.com는 그 하위 Authoritative Name Server의 주소일 것이다.
> + dns4u.ga A 52.231.13.22 : Authoritative Name Server는 도메인 네임 dns4u.ga.에 대한 **A(IP Address) 형식의** DNS 레코드로 52.231.13.22.를 저장함
>   + 여기서 52.231.13.22.는 클라이언트가 원하는 IP 주소이다.
> + `※ 참고 : A, NS, AAAA`
> ```
> A는 IPv4 Address를 의미한다.
> NS는 클라이언트가 원하는 도메인에 대한 단서(IP 주소, 탑-레벨 도메인 등)를 가지고 있는 네임 서버의 도메인을 의미한다. 또한 해당 도메인에 대한 처리를 다른 도메인(직속 하위 도메인) 네임 서버에게 위임하는 것을 의미하기도 한다.
> AAAA는 IPv6 Address를 의미한다.
> ```

<br/>

### 8. CNAME
> + 특정 도메인에 대한 또 다른 도메인(별명)을 정하는 형식
> 
> ![image](https://user-images.githubusercontent.com/82401504/146801404-d3704ea6-d27e-4d46-8ea6-1fe454b8f84f.png)
> 
> #### example.com. A 192.0.1.1
> + 클라이언트가 example.com으로 접속하면 A 레코드에 의해서 IP 주소 192.0.1.1 웹 사이트가 열린다.
> #### `www.example.com` CNAME example.com.
> + example.com. 에 대한 별명을 `www.example.com.`로 정하는 것으로 클라이언트가 `www.example.com`으로 접속하면 CNAME 레코드에 의해서 example.com. 도메인으로 연결되고 이 도메인은 A 레코드에 의해서 IP 주소 192.0.1.1 로 연결되어 웹 사이트가 열린다.
>
> #### CNAME 의 효능 : 유지보수 용이
> + 특정 IP 주소에 연결된 도메인이 여러 개일 경우 만약 해당 IP 주소가 변경된다면 이 IP 주소에 연결된 모든 도메인에 대해서 일일이 수정을 해야 하는 번거로움이 발생하지만 하나의 도메인에 대해서만 해당 IP 주소에 연결하고 CNAME을 사용하여 그 하나의 도메인에 대한 별명으로 여러 개의 도메인을 만든다면 하나의 도메인에 대해서만 IP 주소를 수정할 수 있다.
> 
> ![KakaoTalk_20211221_015913051](https://user-images.githubusercontent.com/82401504/146804477-e8431e5e-cb24-4ddb-9e2e-7541e1aa38ea.jpg)

<br/>

### 9. Github pages 에 도메인 연결하기
> + Github 에게 클라이언트가 자신의 웹 사이트에 접근하기 위한 도메인 dns4u.ga 를 알려줄 것
> + DNS 서버에게 클라이언트가 dns4u.ga 도메인 입력 시 Github 에서 공개한 자체 웹 서버의 IP 주소  192.30.252.153 에 접속하도록 설정 할 것

<br/>

### 10. 호스츠(hosts) 파일 : DNS를 사용하지 않는 방법
> 
> #### 호스츠 파일의 개념
> > + 모든 운영체제에는 호스츠(hosts)라는 파일이 있는데 예를 들어 그 파일에 example.com의 IP 주소는 93.184.216.34라고 적어 놓으면 웹 브라우저에 example.com을 입력하면 해당 IP 주소를 식별하여 IP 주소가 93.184.216.34인 컴퓨터로 접속할 수 있게 된다.
> 
> #### 호스츠 파일의 특징 : 로컬 호스츠 파일 우선
> > + 이때 example.com이라는 도메인이 기존에 누군가 사용 중인 것으로 중복될 수 있지만 해당 로컬 컴퓨터에 한해서는 이를 우선적으로 사용할 수 있다. 즉, 사용자별로 같은 example.com을 입력해도 다른 IP 주소의 컴퓨터와 연결될 수 있는 것이다.
> 
> #### 호스츠 파일의 단점 : 보안 문제
> > + 누군가 악의적으로 바이러스를 유포하여 호스츠 파일을 변조시키면 내가 원래 가려던 웹 사이트를 가려고 했는데 엉뚱한 다른 웹 사이트에 가게 될 수도 있는 것이다. 이를 '피싱'이라고 한다.(단, https 프로토콜이 아닌 http 프로토콜을 이용하는 경우)
> > + 대표적으로 똑같은 금융 웹 사이트로 위장하여 사용자가 개인정보를 입력하도록 하여 개인정보를 도용하는 사례가 있다. 따라서 백신 프로그램 등을 사용하여 호스츠 파일이 변조되지 않도록 항상 조심해야 한다.
```
※ 참고 : SSL(Secure Sockets Layer)
SSL은 웹사이트와 브라우저(혹은, 두 서버) 사이에 전송된 데이터를 암호화하여 인터넷 연결을 보안을 유지하는 표준 기술이다.
이는 해커가 개인 정보 및 금융 정보를 포함한 전송되는 모든 정보를 열람하거나 훔치는 것을 방지한다.
```

<br/>

### 11. 호스트 이름 vs 도메인 이름
> 
> #### 호스트 이름
> + 호스트(host)의 기준은 IP 주소이다.
>   + 서버 시스템, 개인용 컴퓨터(PC), 라우터 등 모든 기기들은 인터넷 네트워크 상에서 하나의 호스트라고 볼 수 있다.
>   + 이러한 호스트들은 모두 IP 주소를 통해 인터넷 통신할 수 있다.
> + 호스트 이름(hostname)은 이런 호스트(host)에 부여된 이름(name)이다.
>   + 예를 들어 컴퓨터에 처음 운영체제를 설치 할 때 컴퓨터 이름을 적게 되는데, 이 이름이 호스트 이름이다.
>   + 이때 오직 영문자, 숫자(0 ~ 9), 하이픈('-', 마지막에 위치 X) 문자로 이름을 설정하도록 되어있는데, 이는 컴퓨터 이름이 인터넷 망에서는 그대로 호스트 이름(hostname)으로 쓰이기 때문이다.
> 
> #### 도메인 이름
> + 호스트 이름은 하나의 서버나 PC를 지칭하는 반면 **도메인 이름은 각각의 서버나 PC 그룹을 대표하는 이름**이다.
> + 예를 들어 네이버에는 여러 개의 서버가 연결되어있는데 DB, 메일, 블로그 등 각자의 역할을 하는 서버(호스트)가 있다.
>   + 이때 naver.com이라는 것은 네이버가 제공하는 모든 서버들의 대표 이름이므로 도메인 이름이며,
>   + 네이버 메일 mail.naver.com 이나 네이버 지식인 kin.naver.com 처럼 mail과 kin은 호스트 이름(서브 도메인)이라고 볼 수 있다.
>   + 이처럼 실제 호스트 이름을 서브 도메인으로 직접 사용하기 보다는 서비스명(mail, news, kin 등)이나 지역명(Korea, America 등)을 활용한 이름을 사용한다.

<br/>

### 참고자료
+ 유튜브 생활코딩

