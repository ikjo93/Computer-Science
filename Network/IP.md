### 1. IP(Internet Protocol, 인터넷 통신규약)의 개념
- 프로토콜(Protocol)은 통신 시스템이 데이터를 교환하기 위해 사용하는 통신 규칙이다.
- IP 주소는 인터넷에 연결된 기기(컴퓨터)를 식별하는 유일한 번호이다.
  - 4개의 10진수 형태로 구성(IPv4)되는데 이때 각 10진수는 8자리 2진수(0~255 = 28)를 표현한다.
  - IP 주소는 총 32비트(2^8*2^8*2^8*2^8 = 2^32 = 4,294,967,296)로 구성
  - 컴퓨터가 늘어갈수록 많은 IP 주소가 필요하므로 최근에는 숫자 구분을 4개에서 6개로 늘린 IPv6를 함께 사용하고 있다.
- IP 주소는 네트워크 주소와 호스트 주소로 나뉜다.
  - 네트워크 주소: 기기가 속해있는 네트워크(인터넷 등)를 식별하는 데 사용
  - 호스트 주소: 해당 네트워크에 접속한 기기를 식별하는 데 사용
- 한 네트워크에 포함된 모든 기기들은 같은 네트워크 주소를 갖고 있어야 하지만, 한 네트워크 내에 같은 주소를 갖는 기기가 있으면 안 된다.
  - **모든 컴퓨터는 서로 다른 IP 주소를 갖는다.**
- IP 예시
  - `192.168.219.100` -> 특정 공유기가 제공하는 네트워크 주소 지칭 `http://192.168.219.100/index.html` -> 같은 네트워크에 연결된 컴퓨터만 해당 웹 사이트에 접속이 가능하다.
  - `127.0.0.1` -> 자기 자신의 컴퓨터 주소 지칭 `http://127.0.0.1/index.html` -> 자기 자신의 컴퓨터만 해당 웹 사이트에 접속이 가능하다.

<br/>

### 2. IP의 역할
- IP를 통해 클라이언트 컴퓨터는 서버 컴퓨터로 데이터를 요청하고, 서버 컴퓨터는 클라이언트 컴퓨터에 데이터를 응답할 수 있다.
- 클라이언트와 서버가 데이터를 주고받을때에는 **IP 패킷(Packet)이라는 통신 단위**로 서로 주고 받는데, IP 패킷에는 **전송할 데이터**뿐만 아니라 **클라이언트의 IP 주소와 서버의 IP 주소** 등이 저장되어있어 인터넷 내 무수히 많은 노드들 사이에서도 클라이언트와 서버간 서로 데이터를 주고 받을 수 있게 된다.
```
※ 참고 : 네트워크에서의 스위칭 종류
서킷 스위칭 : 서로 간의 연결이 이루어지면 연결이 끊어질 때까지 해당 회선을 온전히 독점 사용(다른 사용자 이용 X) -> 전화
패킷 스위칭 : 하나의 회선에서도 여러 명이 동시에 통신 가능 -> 인터넷
```
- 이때 목적지 IP 주소까지 어떤 경로를 거쳐 데이터를 보낼지(최적의 경로 선택) 결정하는 것을 **라우팅**이라고 한다.

<br/>

### 3. IP의 문제점
- 비연결성 : 연결이 되지 않아도 패킷을 전송한다.
  - 패킷을 받을 대상이 없거나 대상이 서비스 불능 상태여도 패킷을 전송한다.
- 비신뢰성
  - 패킷을 주고받는 과정에서 패킷이 소실될 수 있다.
  - 패킷을 주고받는 순서가 달라질 수 있다.
    - 클라이언트가 1 -> 2 순으로 패킷을 전송했지만 서버는 2 -> 1 순으로 패킷을 전달받을 수 있다.

<br/>

### 4. 공유기(Router, 라우터)
- 공유기는 광역 네트워크(통신사 → 공유기)와 지역 네트워크(공유기 → 컴퓨터·스마트폰·노트북) 사이를 중개하는 역할을 한다.
- 공유기를 사용하면 하나의 IP 주소를 여러대의 컴퓨터가 나눠 쓸 수 있다. 이를 통해 IP 주소 절감이 가능해지고 개인들은 통신 요금 절감이 가능해진다.
- 통신사로부터 회선을 받아 그 케이블을 컴퓨터에 꽂거나 와이파이가 연결되는 순간 해당 컴퓨터에는 IP 주소가 할당된다. 이때 사용할 컴퓨터가 여러 대의 경우 회선을 여러 개 추가하기보다는 공유기를 사용한다.
- 공용 IP 주소(public IP address) : 광역 네트워크 내에서 이 공유기로 접속할 수 있게 해주는 IP 주소
- 사설 IP 주소(private IP address) : 지역 네트워크 내에서만 사용할 수 있는 IP 주소
  - 컴퓨터·스마트폰·노트북이 공유기의 케이블이나 무선으로 인터넷이 연결되면 공유기를 포함하여 컴퓨터·스마트폰·노트북 각각 사설 IP 주소를 부여받는다.
  - 특히 공유기에 부여된 내부 네트워크(LAN) 안에서의 IP 주소를 Gateway address(Router address)라고도 한다.
> |사설 IP 주소의 범위|개수|
> |:--:|:--:|
> |10.0.0.0. ~ 10.255.255.255|16,777,216 (256*256*256)|
> |172.16.0.0 ~ 172.31.255.255|1,048,576 (16*256*256)|
> |192.168.0.0. ~ 192.168.255.255|65,536 (256*256)|
- 사설 IP 를 쓰고 있는 각각의 컴퓨터들은 NAT(Network Address Translation)를 통해 외부 인터넷에 접속할 수 있게 된다.
  - 신호 흐름도: 사용자 컴퓨터 -> LAN -> Gateway Address에 해당하는 공유기 -> WAN -> 외부 웹 사이트
    - 공유기가 사용자 컴퓨터의 사설 IP 주소(예: 192.168.0.4)를 기록한 후 그 데이터를 공용 IP 주소(예: 59.6.66.238)로 변경한 후 그 변경된 데이터를 외부 웹 사이트에 전송한다.
    - 그럼 외부 웹 사이트의 웹 서버가 그 정보를 받고 공유기(59.6.66.238)에 응답한다.
    - 공유기는 그 응답 받은 정보를 받아 보고 그 정보가 192.168.0.4 라는 IP 주소를 가지고 있는 사용자 컴퓨터가 요청했던 정보라는 사실을 파악하여 사용자 컴퓨터에게 응답한다.

<br/>

### 5. 동적(Dynamic) & 정적(Static) IP Address
+ ISP(Internet Service Provider, 통신사)는 수많은 인터넷 사용 고객들을 보유하고 있는데, 각각의 고객마다 IP 주소를 할당하는 것이 아니라 사용하지 않는 고객의 IP 주소를 사용하고 있는 고객에게 할당한다.(IP 주소 절약을 위한 일종의 돌려막기) 즉, 모든 인터넷 사용자들의 IP 주소가 계속 바뀌는 것이다. 이를 `동적 IP 주소`라고 한다.
+ 그러나, 내가 24시간 동작해야 하는 웹 서버를 운영하고 있을 때 이처럼 IP 주소가 바뀌게 된다면 문제가 발생한다. 웹 서버 사용자(클라이언트)가 기존 전송받았던 IP 주소를 통해 해당 웹 서버로 접속했는데 다른 웹 서버에 접속될 수 있는 것이다. 이때 IP 주소가 바뀌지 않고 독점적으로 사용할 수 있는 IP 주소가 있는데 이를 `정적 IP 주소`라고 한다. 주로 24시간 동작하는 웹 서버를 운영할 때 사용되며 동적 IP 주소 이용 시 보다 추가 요금이 발생한다.

<br/>

### 6. DHCP(Dynamic Host Configuration Protocol)
+ 공유기를 통해 스마트폰과 컴퓨터로 인터넷을 사용하는 도중에 노트북을 추가로 공유기에 연결시켜 인터넷을 사용하려고 한다.
+ 이때 노트북에 부여되는 사설 IP 주소는 기존에 사용되고 있는 사설 IP 주소와 중복될 수 없다.
+ 이때 노트북에 사설 IP 주소를 부여하는 방법은 기본적(Default)으로 **DHCP 서버를 통해 자동으로 동적 IP 주소가 부여되도록 설정**되어 있다.
```
※ 참고 : DHCP 동작 원리
1. 공유기는 DHCP 서버를 내장하고, 노트북 등 인터넷을 사용하는 기기는 DHCP 클라이언트 프로그램을 내장하고 있다.
2. DHCP 클라이언트가 공유기에 자신의 MAC Address를 전송하여 DHCP 서버가 있는지 식별 및 사설 IP 주소 할당 요청
3. DHCP 서버는 DHCP 클라이언트에게 자신의 MAC Address를 전송하여 사용 가능한 사설 IP 주소와 사용 가능 시간을 응답하고 해당 기기가 어떤 IP 주소를 빌려 갔는지 기억
※ Mac Address란?
공유기, 노트북 등과 같이 인터넷을 사용하는 기기의 부품에는 식별자가 표기되어 있는데 이를 ‘MAC Address(Media Access Address 또는 Physical Address)’라고 한다.
```
+ 내부 네트워크 내 컴퓨터가 적을수록 IP 임대 시간을 길게 하는 것이 유리하고 컴퓨터가 많을수록 IP 임대 시간을 짧게 하는 것이 유리하다.
+ 공유기에 부여된 공용 IP 주소 역시 통신사와 계약을 할 때는 동적 IP 주소인데, 이는 공유기에 IP 주소를 할당하는 또 다른 DHCP 서버(통신사)가 광역 네트워크에 있다는 것을 암시한다.
+ 현재 컴퓨터, 노트북, 스마트폰 등 다양한 컴퓨팅 기기들이 인터넷을 사용하기 위해 여러 공유기를 바꿔가면서 통신을 계속해서 해야 하므로 이러한 DHCP 기술은 인터넷 혁명, 모바일 혁명에 크게 이바지했다고 볼 수 있다.
+ 수동으로 부여하는 방법 : 제어판 – 네트워크 및 인터넷 – 네트워크 및 공유 센터 – 인터넷 연결 – 속성 – 인터넷 프로토콜 버전 4(TCP/IPv4) - 다음 IP 주소 사용 – IP 주소, 서브넷 마스크, 기본 게이트웨이, 기본 설정 DNS 서버, 보조 DNS 서버 작성

<br/>

### 참고자료
+ 유튜브 생활코딩
+ 인프런 모든 개발자를 위한 HTTP 웹 기본 지식
